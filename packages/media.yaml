switch:
  - platform: template
    switches:
      projector:
        value_template: '{{ states.switch.benq_w1070.state }}'
        turn_on:
          - service: switch.turn_off
            entity_id: switch.circadian_lighting_circadian_lighting
          - service: light.turn_off
            entity_id: light.bureau
          - service: switch.turn_on
            entity_id: switch.steambox
          - service: switch.turn_on
            entity_id: switch.benq_w1070
          - service: media_player.turn_on
            entity_id: media_player.yamaha_receiver
          - service: media_player.select_source
            entity_id: media_player.yamaha_receiver
            data:
              source: 'HDMI1'
          - service: light.turn_on
            entity_id: light.salon
            data:
              brightness: 1
              transition: 60
          - delay: '00:01:00'
          # - service: light.turn_off
          #   entity_id: all
        turn_off:
          - service: switch.turn_off
            entity_id: switch.benq_w1070
          - service: media_player.turn_off
            entity_id: media_player.yamaha_receiver
          - service: switch.turn_off
            entity_id: switch.steambox
          - service: light.turn_off
            entity_id:
              - light.hue_ws2812_ring_1
              - light.hue_ws2812_ring_2
          - choose:
            - conditions:
              - condition: state
                entity_id: sun.sun
                state: 'below_horizon'
              sequence:
                - service: light.turn_on
                  entity_id: light.salon
                  data:
                    brightness: 60
                    transition: 60
                - delay: '00:01:00'
                - service: switch.turn_on
                  entity_id: switch.circadian_lighting_circadian_lighting
            default:
              - service: switch.turn_on
                entity_id: switch.circadian_lighting_circadian_lighting

media_player:
  - platform: universal
    name: Ã‰cran salon
    children:
      - media_player.yamaha_receiver
    commands:
      turn_on:
        service: switch.turn_on
        data:
          entity_id: switch.projector
      turn_off:
        service: switch.turn_off
        data:
          entity_id: switch.projector
      volume_up:
        service: script.turn_on
        data:
          entity_id: script.ht_volume_up
      volume_down:
        service: script.turn_on
        data:
          entity_id: script.ht_volume_down
      volume_mute:
        service: script.turn_on
        data:
          entity_id: script.ht_volume_mute
      volume_set:
        service: media_player.volume_set
        data_template:
          entity_id: media_player.yamaha_receiver
          volume_level: '{{ volume_level }}'
      select_source:
        service: media_player.select_source
        data_template:
          entity_id: media_player.yamaha_receiver
          source: '{{ source }}'
    attributes:
      state: media_player.yamaha_receiver
      is_volume_muted: media_player.yamaha_receiver|is_volume_muted
      volume_level: media_player.yamaha_receiver|volume_level
      source: media_player.yamaha_receiver|source
      source_list: media_player.yamaha_receiver|source_list

homeassistant:
  customize:
    switch.projector:
      friendly-name: Projo
      icon: 'mdi:projector'
    # media_player.ecran_salon:
    #   device_class: tv
